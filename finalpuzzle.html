<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>⭐ Star Grid with Regions ⭐</title>
<style>
    body {
        text-align: center;
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
    }
    
   
    #grid-container {
        display: inline-block;
        margin-top: 20px;
    }
    
  
    .cell {
        width: 40px;
        height: 40px;
        border: 1px solid #999;
        display: inline-block;
        text-align: center;
        vertical-align: middle;
        font-size: 20px;
        line-height: 40px;
        cursor: pointer;
    }
    
   
    .star {
        color: gold;
    }
    
   
    #message {
        margin-top: 15px;
        font-weight: bold;
    }
   
    .region-1 { background-color: #ffcccc; }
    .region-2 { background-color: #ccffcc; }
    .region-3 { background-color: #ccccff; }
    .region-4 { background-color: #ffcc99; }
    .region-5 { background-color: #cc99ff; }
    .region-6 { background-color: #99ffcc; }
    .region-7 { background-color: #ff99cc; }
    .region-8 { background-color: #99ccff; }
    .region-9 { background-color: #ffffcc; }</style>
</head>
<body>
    <h1>⭐ Star Grid with Regions ⭐</h1>

    <div id="input-container">
        <label for="grid-size">Enter Grid Size (N x N): </label>
        <input type="number" id="grid-size" min="1" max="9" placeholder="Enter Grid Size">
        <button onclick="generateGrid()">Generate Grid</button>
    </div>

    <div id="grid-container"></div>

    <div id="message"></div>

    <script>let gridSize;
        let starGrid = [];
        let regionGrid = [];
        let regionColors = ["region-1", "region-2", "region-3", "region-4", "region-5", "region-6", "region-7", "region-8", "region-9"];
        
        function generateGrid() {
            gridSize = parseInt(document.getElementById("grid-size").value);
            if (isNaN(gridSize) || gridSize <= 0 || gridSize > 9) {
                alert("Enter a valid grid size (1-9)");
                return;
            }
        
            starGrid = Array.from({ length: gridSize }, () => Array(gridSize).fill(' '));
            regionGrid = createRegions(gridSize);
            displayGrid();
        }
        
        function createRegions(size) {
            let grid = Array.from({ length: size }, () => Array(size).fill(-1));
            let regionId = 0;
        
            function isValidCell(x, y) {
                return x >= 0 && x < size && y >= 0 && y < size && grid[x][y] === -1;
            }
        
            function dfs(x, y, regionId, remaining) {
                if (remaining <= 0) return remaining;
        
                grid[x][y] = regionId;
                remaining--;
        
                let directions = [[0,1], [1,0], [0,-1], [-1,0]];
                directions.sort(() => Math.random() - 0.5);
        
                for (let [dx, dy] of directions) {
                    let nx = x + dx;
                    let ny = y + dy;
                    if (isValidCell(nx, ny)) {
                        remaining = dfs(nx, ny, regionId, remaining);
                    }
                }
                return remaining;
            }
        
            let cellsPerRegion = Math.floor(size * size / size);
            let extraCells = (size * size) % size;
        
            for (let r = 0; r < size; r++) {
                let remaining = cellsPerRegion + (extraCells > 0 ? 1 : 0);
                extraCells--;
        
                let placed = false;
                while (!placed) {
                    let x = Math.floor(Math.random() * size);
                    let y = Math.floor(Math.random() * size);
                    if (grid[x][y] === -1) {
                        dfs(x, y, r, remaining);
                        placed = true;
                    }
                }
            }
        
            return grid;
        }
        
        function displayGrid() {
            const container = document.getElementById("grid-container");
            container.innerHTML = "";
        
            for (let i = 0; i < gridSize; i++) {
                const rowDiv = document.createElement("div");
                for (let j = 0; j < gridSize; j++) {
                    const cell = document.createElement("div");
                    cell.classList.add("cell", regionColors[regionGrid[i][j]]);
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.onclick = () => placeStar(i, j);
        
                    if (starGrid[i][j] === '*') {
                        cell.textContent = '⭐';
                        cell.classList.add("star");
                    }
        
                    rowDiv.appendChild(cell);
                }
                container.appendChild(rowDiv);
            }
        }
        
        function placeStar(row, col) {
            const message = document.getElementById("message");
            message.textContent = "";
        
            if (starGrid[row][col] === '*') {
                starGrid[row][col] = ' ';
            } else {
                if (!canPlaceStar(row, col)) {
                    message.textContent = "❌ Invalid Placement!";
                    message.style.color = "red";
                    return;
                }
                starGrid[row][col] = '*';
            }
            displayGrid();
        }
        
        function canPlaceStar(row, col) {
            let regionId = regionGrid[row][col];
        
            // Same row, column, or adjacent cell check
            for (let i = 0; i < gridSize; i++) {
                if (starGrid[row][i] === '*' || starGrid[i][col] === '*') return false;
            }
        
            let directions = [[-1, -1], [-1, 0], [-1, 1], [0, -1], [0,1], [1,-1], [1,0], [1,1]];
            for (let [dx, dy] of directions) {
                let nx = row + dx, ny = col + dy;
                if (nx >= 0 && nx < gridSize && ny >= 0 && ny < gridSize && starGrid[nx][ny] === '*') return false;
            }
        
            // Check if another star exists in the same region
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    if (regionGrid[i][j] === regionId && starGrid[i][j] === '*') return false;
                }
            }
        
            return true;
        }</script>
</body>
</html>
